# grunt-directives [![Build Status](https://travis-ci.org/dciccale/grunt-directives.png?branch=master)](https://travis-ci.org/dciccale/grunt-directives) [![NPM version](https://badge.fury.io/js/grunt-directives.png)](http://badge.fury.io/js/grunt-directives)

> Simple grunt task to use directives in your files

## Getting Started
This plugin requires Grunt `~0.4.1`

If you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:

```shell
npm install grunt-directives --save-dev
```

One the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:

```js
grunt.loadNpmTasks('grunt-directives');
```

## The "directives" task

### Overview
In your project's Gruntfile, add a section named `directives` to the data object passed into `grunt.initConfig()`.

```js
grunt.initConfig({
  directives: {
    options: {
      // Task-specific options go here.
    },
    your_target: {
      // Target-specific file lists and/or options go here.
    },
  },
})
```

### Options

#### separator
Type: `String`
Default: `grunt.util.linefeed`

Concatenated files will be joined on this string. If you're post-processing concatenated JavaScript files with a minifier, you may need to use a semicolon `';'` as the separator.

#### banner
Type: `String`
Default: empty string

This string will be prepended to the beginning of the concatenated output. It is processed using [grunt.template.process][], using the default options.

_(Default processing options are explained in the [grunt.template.process][] documentation)_

#### footer
Type: `String`
Default: empty string

This string will be appended to the end of the concatenated output. It is processed using [grunt.template.process][], using the default options.

_(Default processing options are explained in the [grunt.template.process][] documentation)_

### Usage Examples

In this example, running `grunt directives:dist` (or `grunt directives` because `directives` is a [multi task][]) will process the specified source files (in order), joining files with `;`, process them to look for `@include` directives and writing the output to `dist/built.js`.

Suppose you have a `test.js` file with this content:
```js
var included = false;

// @include file1.js

if (included) {
  console.log('file1.js was included successfully!');
}
```

Where `file1.js` is:
```js
included = true;
```

Now define the directives task in grunt:

```js
grunt.initConfig({
  directives: {
    options: {
      separator: ';'
    },
    dist: {
      src: ['test.js'],
      dest: 'dist/built.js'
    }
  }
});
```

This can also be done with html:

Suppose you have a `test.html` file with this content:
```html
<html>
  ...
  <body>
    <!-- @include content.html -->
  </body>
</html>
```

Where `content.html` is:
```html
<p>Hello world!</p>
```

And the result will be:

```html
<html>
  ...
  <body>
    <p>Hello world!</p>
  </body>
</html>
```

#### Banner comments

In this example, running `grunt directives:dist` will first concatenate the source files, process them to look for `@include` directives and concatenate a newly-generated banner comment at the top, writing the output to `dist/built.js`.

This generated banner will be the contents of the `banner` template string interpolated with the config object. In this case, those properties are the values imported from the `package.json` file (which are available via the `pkg` config property) plus today's date.

_Note: you don't have to use an external JSON file. It's also valid to create the `pkg` object inline in the config. That being said, if you already have a JSON file, you might as well reference it._

```js
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),
  concat: {
    options: {
      banner: '/*! <%= pkg.name %> - v<%= pkg.version %> - ' +
        '<%= grunt.template.today("yyyy-mm-dd") %> */'
    },
    dist: {
      src: ['src/project.js'],
      dest: 'dist/built.js'
    }
  }
});
```

### Supported directives
- include
- *more to come...*

## Contributing
In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using [Grunt](http://gruntjs.com/).

## Release History

- 0.1.0 Initial release
